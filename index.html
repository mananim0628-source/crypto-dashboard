<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ ÌÅ¨Î¶ΩÌÜ† 6Îã®Í≥Ñ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ Ïã§ÏãúÍ∞Ñ ÎåÄÏãúÎ≥¥Îìú PRO</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%); 
            color: white; 
            min-height: 100vh; 
        }
        
        .header { 
            background: rgba(0, 0, 0, 0.7); 
            backdrop-filter: blur(10px); 
            padding: 20px; 
            text-align: center; 
            border-bottom: 1px solid rgba(0, 255, 136, 0.3);
        }
        
        .header h1 { 
            font-size: 28px; 
            background: linear-gradient(45deg, #00ff88, #48cae4); 
            background-clip: text; 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        
        .update-status { 
            font-size: 12px; 
            color: #48cae4; 
            margin-top: 10px;
        }
        
        .api-status { 
            display: inline-block; 
            padding: 3px 8px; 
            background: rgba(0, 255, 136, 0.2); 
            color: #00ff88; 
            border-radius: 5px; 
            margin-left: 10px;
        }
        
        .api-error {
            background: rgba(255, 71, 87, 0.2);
            color: #ff4757;
        }

        .search-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            position: relative;
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        #coinSearch {
            flex: 1;
            padding: 15px;
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 16px;
        }

        #coinSearch::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        #searchBtn {
            padding: 15px 25px;
            background: linear-gradient(45deg, #00ff88, #48cae4);
            border: none;
            border-radius: 10px;
            color: #0a0a0f;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        #searchBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        .suggestions-list {
            position: absolute;
            top: 70px;
            left: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(0, 255, 136, 0.2);
            z-index: 1000;
            display: none;
        }

        .suggestions-list.show {
            display: block;
        }

        .suggestion-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.2s;
        }

        .suggestion-item:hover {
            background: rgba(0, 255, 136, 0.1);
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .favorites-section {
            margin: 20px auto;
            max-width: 1600px;
            padding: 0 20px;
        }

        .favorites-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .favorites-title {
            font-size: 18px;
            color: #48cae4;
        }

        .clear-favorites {
            background: rgba(255, 71, 87, 0.2);
            color: #ff4757;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
        }

        .favorites-list {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .favorite-item {
            background: rgba(72, 202, 228, 0.2);
            color: #48cae4;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .favorite-item:hover {
            background: rgba(72, 202, 228, 0.3);
            transform: translateY(-1px);
        }

        .remove-favorite {
            background: none;
            border: none;
            color: #ff4757;
            cursor: pointer;
            font-size: 16px;
            margin-left: 5px;
        }

        .star-btn {
            background: none;
            border: none;
            color: #feca57;
            cursor: pointer;
            font-size: 18px;
            margin-left: 10px;
            transition: all 0.3s;
        }

        .star-btn:hover {
            transform: scale(1.2);
        }

        .star-btn.active {
            color: #00ff88;
        }

        .section-header {
            margin: 30px auto 20px;
            max-width: 1600px;
            padding: 0 20px;
        }

        .section-title {
            font-size: 20px;
            color: #00ff88;
            margin-bottom: 10px;
        }

        .section-subtitle {
            font-size: 14px;
            color: #a0a0a0;
        }
        
        .container { 
            max-width: 1600px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        
        .price-cards { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
            gap: 20px; 
            margin-bottom: 30px; 
        }
        
        .price-card { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(10px); 
            border: 2px solid; 
            border-radius: 15px; 
            padding: 25px; 
            transition: all 0.3s;
            position: relative;
        }
        
        .price-card.bullish { 
            border-color: #00ff88; 
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2); 
        }
        
        .price-card.bearish { 
            border-color: #ff4757; 
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.2); 
        }
        
        .price-card.neutral { 
            border-color: #feca57; 
            box-shadow: 0 0 20px rgba(254, 202, 87, 0.2); 
        }
        
        .coin-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 15px; 
        }
        
        .coin-name { 
            font-size: 20px; 
            font-weight: bold; 
            display: flex;
            align-items: center;
        }
        
        .coin-score {
            font-size: 16px;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 8px;
            background: rgba(72, 202, 228, 0.2);
            color: #48cae4;
        }
        
        .coin-price { 
            font-size: 32px; 
            font-weight: bold; 
            color: #00ff88; 
            margin: 15px 0; 
        }
        
        .price-change { 
            padding: 8px 12px; 
            border-radius: 8px; 
            font-size: 14px; 
            font-weight: bold; 
            display: inline-block; 
            margin-bottom: 15px;
        }
        
        .bullish .price-change { 
            background: rgba(0, 255, 136, 0.2); 
            color: #00ff88; 
        }
        
        .bearish .price-change { 
            background: rgba(255, 71, 87, 0.2); 
            color: #ff4757; 
        }
        
        .neutral .price-change { 
            background: rgba(254, 202, 87, 0.2); 
            color: #feca57; 
        }
        
        .trading-info {
            background: rgba(72, 202, 228, 0.1);
            border: 1px solid rgba(72, 202, 228, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .strategy-direction {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .long-strategy {
            color: #00ff88;
        }
        
        .short-strategy {
            color: #ff4757;
        }
        
        .hold-strategy {
            color: #feca57;
        }
        
        .trading-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .trading-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            font-size: 14px;
        }
        
        .trading-label {
            color: #a0a0a0;
        }
        
        .trading-value {
            font-weight: bold;
        }
        
        .entry-price { color: #48cae4; }
        .target-price { color: #00ff88; }
        .stop-loss { color: #ff4757; }
        .risk-reward { color: #feca57; }
        
        .checklist-container { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(10px); 
            border: 1px solid rgba(0, 255, 136, 0.3); 
            border-radius: 20px; 
            padding: 30px; 
            margin-bottom: 30px; 
        }
        
        .checklist-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 30px; 
            flex-wrap: wrap;
        }
        
        .checklist-title { 
            font-size: 24px; 
            color: #00ff88; 
        }
        
        .total-score { 
            font-size: 36px; 
            font-weight: bold; 
            padding: 15px 30px; 
            border-radius: 15px; 
            background: linear-gradient(135deg, #00ff88, #48cae4); 
            color: #0a0a0f; 
        }
        
        .checklist-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 15px; 
        }
        
        .checklist-item { 
            background: rgba(255, 255, 255, 0.03); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 10px; 
            padding: 20px; 
        }
        
        .checklist-item-header { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 10px; 
        }
        
        .checklist-score { 
            font-weight: bold; 
            color: #48cae4; 
        }
        
        .progress-bar { 
            height: 8px; 
            background: rgba(255, 255, 255, 0.1); 
            border-radius: 4px; 
            overflow: hidden; 
        }
        
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #48cae4, #00ff88); 
            transition: width 0.5s; 
        }
        
        .strategy-container { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(10px); 
            border: 1px solid rgba(0, 255, 136, 0.3); 
            border-radius: 20px; 
            padding: 30px; 
        }
        
        .strategy-signal { 
            font-size: 32px; 
            font-weight: bold; 
            margin-bottom: 20px; 
        }
        
        .strategy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .strategy-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .strategy-card-title {
            font-size: 14px;
            color: #a0a0a0;
            margin-bottom: 10px;
        }
        
        .strategy-card-value {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
        }
        
        .debug-info {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            margin: 20px;
            border-radius: 10px;
            font-size: 12px;
            color: #666;
            display: block;
        }
        
        @media (max-width: 768px) {
            .price-cards { 
                grid-template-columns: 1fr; 
            }
            
            .checklist-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .trading-grid {
                grid-template-columns: 1fr;
            }

            .search-box {
                flex-direction: column;
            }
            
            .favorites-list {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ ÌÅ¨Î¶ΩÌÜ† 6Îã®Í≥Ñ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ Ïã§ÏãúÍ∞Ñ ÎåÄÏãúÎ≥¥Îìú PRO</h1>
        <div class="update-status">
            ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏: <span id="lastUpdate">-</span> | Îã§Ïùå ÏóÖÎç∞Ïù¥Ìä∏: <span id="countdown">60</span>Ï¥à
            <span class="api-status" id="apiStatus">API Ïó∞Í≤∞Ï§ë...</span>
        </div>
    </div>

    <div class="search-container">
        <div class="search-box">
            <input type="text" id="coinSearch" placeholder="ÏΩîÏù∏Î™Ö ÏûÖÎ†• (Ïòà: doge, shib, matic, uni, link)">
            <button id="searchBtn">üîç Î∂ÑÏÑù</button>
        </div>
        <div id="searchSuggestions" class="suggestions-list"></div>
    </div>

    <div class="favorites-section">
        <div class="favorites-header">
            <div class="favorites-title">‚≠ê Ï¶êÍ≤®Ï∞æÍ∏∞</div>
            <button class="clear-favorites" onclick="clearAllFavorites()">Ï†ÑÏ≤¥ ÏÇ≠Ï†ú</button>
        </div>
        <div id="favoritesList" class="favorites-list"></div>
    </div>

    <div class="section-header">
        <div class="section-title">üéØ ÌïµÏã¨ ÏΩîÏù∏ (BTC, ETH, XRP, BNB)</div>
        <div class="section-subtitle">Í≥†Ï†ï ÌëúÏãúÎêòÎäî Ï£ºÏöî ÏΩîÏù∏Îì§</div>
    </div>

    <div class="container">
        <div id="debugInfo" class="debug-info">
            <strong>ÎîîÎ≤ÑÍ∑∏ Ï†ïÎ≥¥:</strong><br>
            API ÏÉÅÌÉú: <span id="debugApiStatus">ÌôïÏù∏Ï§ë...</span><br>
            ÎßàÏßÄÎßâ ÏöîÏ≤≠: <span id="debugLastRequest">-</span><br>
            ÏùëÎãµ Îç∞Ïù¥ÌÑ∞: <span id="debugResponse">-</span>
        </div>
        
        <div id="coreCoinsCards" class="price-cards"></div>

        <div class="section-header">
            <div class="section-title">üìà Ïã§ÏãúÍ∞Ñ ÏÉÅÏäπ ÏΩîÏù∏ TOP 6</div>
            <div class="section-subtitle">24ÏãúÍ∞Ñ ÏÉÅÏäπÎ•† Í∏∞Ï§Ä (ÏãúÍ∞ÄÏ¥ùÏï° 500ÏúÑ Ïù¥ÎÇ¥)</div>
        </div>
        
        <div id="gainersCards" class="price-cards"></div>

        <div class="checklist-container">
            <div class="checklist-header">
                <h2 class="checklist-title">üìä 7Îã®Í≥Ñ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ Î∂ÑÏÑù</h2>
                <div class="total-score" id="totalScore">0/140Ï†ê</div>
            </div>
            <div id="checklistGrid" class="checklist-grid"></div>
        </div>

        <div class="strategy-container">
            <div class="strategy-signal" id="strategySignal">üéØ AI Í∏∞Î∞ò Ï†ÑÎûµ Ï∂îÏ≤ú</div>
            
            <div class="strategy-grid">
                <div class="strategy-card">
                    <div class="strategy-card-title">Ï∂îÏ≤ú Î†àÎ≤ÑÎ¶¨ÏßÄ</div>
                    <div class="strategy-card-value" id="leverageRec">Í≥ÑÏÇ∞Ï§ë...</div>
                </div>
                <div class="strategy-card">
                    <div class="strategy-card-title">Ìè¨ÏßÄÏÖò ÎπÑÏ§ë</div>
                    <div class="strategy-card-value" id="positionSize">Í≥ÑÏÇ∞Ï§ë...</div>
                </div>
                <div class="strategy-card">
                    <div class="strategy-card-title">ÌèâÍ∑† ÏÜêÏùµÎπÑ</div>
                    <div class="strategy-card-value" id="avgRiskReward">Í≥ÑÏÇ∞Ï§ë...</div>
                </div>
                <div class="strategy-card">
                    <div class="strategy-card-title">ÏãúÏû• ÏÉÅÌÉú</div>
                    <div class="strategy-card-value" id="marketStatus">Î∂ÑÏÑùÏ§ë...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // API ÏÑ§Ï†ï
        const API_KEY = 'CG-AJku92n1VmZV1ZQ2mp46DA2C';
        const API_BASE_URL = 'https://api.coingecko.com/api/v3';
        let countdown = 60;
        let coreCoinsData = [];
        let gainersData = [];
        let isApiWorking = false;
        let updateInterval;
        let countdownInterval;
        
        let favorites = [];
        try {
            favorites = JSON.parse(localStorage.getItem('cryptoFavorites') || '[]');
        } catch (e) {
            console.error('localStorage ÏóêÎü¨:', e);
            favorites = [];
        }
        
        const CORE_COINS = ['bitcoin', 'ethereum', 'ripple', 'binancecoin'];
        
        const checklistItems = [
            { id: 'macro', name: 'üåç Í±∞ÏãúÌôòÍ≤Ω', max: 20, score: 0 },
            { id: 'etf', name: 'üìä ETF¬∑Ï†úÎèÑÍ∂å ÏûêÍ∏à', max: 25, score: 0 },
            { id: 'onchain', name: 'üîó Ïò®Ï≤¥Ïù∏ ÌïµÏã¨', max: 25, score: 0 },
            { id: 'ai', name: 'ü§ñ AI¬∑Î©îÌÉÄÎ≤ÑÏä§', max: 20, score: 0 },
            { id: 'futures', name: 'üìà ÏÑ†Î¨ºÏãúÏû•', max: 20, score: 0 },
            { id: 'technical', name: 'üìâ Í∏∞Ïà†Ï†Å Î∂ÑÏÑù', max: 20, score: 0 },
            { id: 'strategy', name: 'üéØ Ï†ÑÎûµ', max: 10, score: 0 }
        ];

        // Í≥µÌÜµ API Ìò∏Ï∂ú Ìï®Ïàò
        async function fetchWithHeaders(url) {
            console.log('API ÏöîÏ≤≠:', url);
            
            const response = await fetch(url, {
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'x-cg-pro-api-key': API_KEY
                }
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            return response;
        }

        function addToFavorites(coinId, symbol) {
            if (!favorites.find(fav => fav.coinId === coinId)) {
                favorites.push({ coinId, symbol });
                try {
                    localStorage.setItem('cryptoFavorites', JSON.stringify(favorites));
                } catch (e) {
                    console.error('localStorage Ï†ÄÏû• ÏóêÎü¨:', e);
                }
                renderFavorites();
            }
        }

        function removeFromFavorites(coinId) {
            favorites = favorites.filter(fav => fav.coinId !== coinId);
            try {
                localStorage.setItem('cryptoFavorites', JSON.stringify(favorites));
            } catch (e) {
                console.error('localStorage Ï†ÄÏû• ÏóêÎü¨:', e);
            }
            renderFavorites();
        }

        function clearAllFavorites() {
            favorites = [];
            try {
                localStorage.setItem('cryptoFavorites', JSON.stringify(favorites));
            } catch (e) {
                console.error('localStorage Ï†ÄÏû• ÏóêÎü¨:', e);
            }
            renderFavorites();
        }

        function isFavorite(coinId) {
            return favorites.some(fav => fav.coinId === coinId);
        }

        function renderFavorites() {
            const container = document.getElementById('favoritesList');
            
            if (favorites.length === 0) {
                container.innerHTML = '<div style="color: #666; font-style: italic;">Ï¶êÍ≤®Ï∞æÍ∏∞Ìïú ÏΩîÏù∏Ïù¥ ÏóÜÏäµÎãàÎã§</div>';
                return;
            }
            
            let html = '';
            favorites.forEach(favorite => {
                html += `
                    <div class="favorite-item" onclick="analyzeCoinById('${favorite.coinId}')">
                        ${favorite.symbol}
                        <button class="remove-favorite" onclick="event.stopPropagation(); removeFromFavorites('${favorite.coinId}')">&times;</button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function updateDebugInfo(status, request, response) {
            const debugApiStatus = document.getElementById('debugApiStatus');
            const debugLastRequest = document.getElementById('debugLastRequest');
            const debugResponse = document.getElementById('debugResponse');
            
            if (debugApiStatus) debugApiStatus.textContent = status;
            if (debugLastRequest) debugLastRequest.textContent = request;
            if (debugResponse) debugResponse.textContent = response;
        }

        async function fetchCoreCoins() {
            console.log('üìà ÌïµÏã¨ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ ÏöîÏ≤≠ ÏãúÏûë...');
            try {
                const url = `${API_BASE_URL}/simple/price?ids=${CORE_COINS.join(',')}&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true&include_market_cap=true`;
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                        'x-cg-pro-api-key': API_KEY
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('ÌïµÏã¨ ÏΩîÏù∏ API ÏùëÎãµ:', data);
                
                if (!data || Object.keys(data).length === 0) {
                    throw new Error('Îπà ÏùëÎãµ Îç∞Ïù¥ÌÑ∞');
                }
                
                coreCoinsData = [
                    {
                        id: 'bitcoin',
                        symbol: 'BTC',
                        name: 'Bitcoin',
                        icon: 'üî•',
                        price: data.bitcoin?.usd || 0,
                        change: data.bitcoin?.usd_24h_change || 0,
                        volume: data.bitcoin?.usd_24h_vol || 0,
                        marketCap: data.bitcoin?.usd_market_cap || 0
                    },
                    {
                        id: 'ethereum',
                        symbol: 'ETH',
                        name: 'Ethereum',
                        icon: '‚≠ê',
                        price: data.ethereum?.usd || 0,
                        change: data.ethereum?.usd_24h_change || 0,
                        volume: data.ethereum?.usd_24h_vol || 0,
                        marketCap: data.ethereum?.usd_market_cap || 0
                    },
                    {
                        id: 'ripple',
                        symbol: 'XRP',
                        name: 'Ripple',
                        icon: 'üíé',
                        price: data.ripple?.usd || 0,
                        change: data.ripple?.usd_24h_change || 0,
                        volume: data.ripple?.usd_24h_vol || 0,
                        marketCap: data.ripple?.usd_market_cap || 0
                    },
                    {
                        id: 'binancecoin',
                        symbol: 'BNB',
                        name: 'Binance',
                        icon: 'ü™ô',
                        price: data.binancecoin?.usd || 0,
                        change: data.binancecoin?.usd_24h_change || 0,
                        volume: data.binancecoin?.usd_24h_vol || 0,
                        marketCap: data.binancecoin?.usd_market_cap || 0
                    }
                ].filter(coin => coin.price > 0);
                
                console.log('Ï≤òÎ¶¨Îêú ÌïµÏã¨ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞:', coreCoinsData);
                return coreCoinsData;
                
            } catch (error) {
                console.error('ÌïµÏã¨ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ ÏóêÎü¨:', error);
                coreCoinsData = [
                    { id: 'bitcoin', symbol: 'BTC', name: 'Bitcoin', icon: 'üî•', price: 98500, change: 1.15, volume: 28000000000, marketCap: 1950000000000 },
                    { id: 'ethereum', symbol: 'ETH', name: 'Ethereum', icon: '‚≠ê', price: 3800, change: 2.63, volume: 18000000000, marketCap: 430000000000 },
                    { id: 'ripple', symbol: 'XRP', name: 'Ripple', icon: 'üíé', price: 2.45, change: 2.8, volume: 3500000000, marketCap: 135000000000 },
                    { id: 'binancecoin', symbol: 'BNB', name: 'Binance', icon: 'ü™ô', price: 520, change: 0.8, volume: 1800000000, marketCap: 78000000000 }
                ];
                return coreCoinsData;
            }
        }

        async function fetchGainersCoins() {
            console.log('üìà ÏÉÅÏäπ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ ÏöîÏ≤≠ ÏãúÏûë...');
            try {
                const url = `${API_BASE_URL}/coins/markets?vs_currency=usd&order=percent_change_24h_desc&per_page=50&page=1&sparkline=false&price_change_percentage=24h`;
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                        'x-cg-pro-api-key': API_KEY
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('ÏÉÅÏäπ ÏΩîÏù∏ API ÏùëÎãµ:', data);
                
                if (!data || !Array.isArray(data) || data.length === 0) {
                    throw new Error('ÏÉÅÏäπ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞Í∞Ä Î∞∞Ïó¥Ïù¥ ÏïÑÎãàÍ±∞ÎÇò ÎπÑÏñ¥ÏûàÏùå');
                }
                
                gainersData = data
                    .filter(coin => 
                        !CORE_COINS.includes(coin.id) && 
                        coin.price_change_percentage_24h > 1 &&
                        coin.market_cap_rank <= 500 &&
                        coin.total_volume > 1000000
                    )
                    .slice(0, 6)
                    .map(coin => ({
                        id: coin.id,
                        symbol: coin.symbol.toUpperCase(),
                        name: coin.name,
                        icon: 'üìà',
                        price: coin.current_price,
                        change: coin.price_change_percentage_24h,
                        volume: coin.total_volume,
                        marketCap: coin.market_cap
                    }));
                
                console.log('Ï≤òÎ¶¨Îêú ÏÉÅÏäπ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞:', gainersData);
                return gainersData;
                
            } catch (error) {
                console.error('ÏÉÅÏäπ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ ÏóêÎü¨:', error);
                gainersData = [
                    { id: 'solana', symbol: 'SOL', name: 'Solana', icon: 'üìà', price: 185, change: 8.5, volume: 3200000000, marketCap: 85000000000 },
                    { id: 'cardano', symbol: 'ADA', name: 'Cardano', icon: 'üìà', price: 0.95, change: 7.2, volume: 1200000000, marketCap: 33000000000 },
                    { id: 'polygon', symbol: 'MATIC', name: 'Polygon', icon: 'üìà', price: 1.2, change: 6.8, volume: 800000000, marketCap: 12000000000 },
                    { id: 'chainlink', symbol: 'LINK', name: 'Chainlink', icon: 'üìà', price: 25, change: 5.4, volume: 600000000, marketCap: 15000000000 },
                    { id: 'uniswap', symbol: 'UNI', name: 'Uniswap', icon: 'üìà', price: 12, change: 4.9, volume: 400000000, marketCap: 8000000000 },
                    { id: 'avalanche-2', symbol: 'AVAX', name: 'Avalanche', icon: 'üìà', price: 45, change: 4.2, volume: 700000000, marketCap: 18000000000 }
                ];
                return gainersData;
            }
        }

        async function fetchAllCryptoData() {
            const timestamp = new Date().toLocaleTimeString();
            updateDebugInfo('ÏöîÏ≤≠ Ï§ë...', timestamp, '-');
            
            console.log('üöÄ Ï†ÑÏ≤¥ ÌÅ¨Î¶ΩÌÜ† Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÏûë');
            
            try {
                await Promise.all([fetchCoreCoins(), fetchGainersCoins()]);
                
                isApiWorking = true;
                document.getElementById('apiStatus').textContent = 'API ‚úÖ PRO';
                document.getElementById('apiStatus').className = 'api-status';
                
                updateDebugInfo('ÏÑ±Í≥µ', timestamp, `ÌïµÏã¨: ${coreCoinsData.length}Í∞ú, ÏÉÅÏäπ: ${gainersData.length}Í∞ú`);
                console.log('‚úÖ Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å');
                
            } catch (error) {
                console.error('‚ùå Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ ÏóêÎü¨:', error);
                updateDebugInfo(`ÏóêÎü¨: ${error.message}`, timestamp, '-');
                document.getElementById('apiStatus').textContent = 'API ‚ùå ÎçîÎØ∏';
                document.getElementById('apiStatus').className = 'api-status api-error';
            }
        }

        // ÏΩîÏù∏ Í≤ÄÏÉâ API
        async function searchCoin(query) {
            try {
                const searchUrl = `${API_BASE_URL}/search?query=${encodeURIComponent(query)}`;
                console.log('Í≤ÄÏÉâ API Ìò∏Ï∂ú:', searchUrl);
                
                const searchResponse = await fetchWithHeaders(searchUrl);
                
                if (searchResponse.ok) {
                    const searchData = await searchResponse.json();
                    console.log('Ïã§Ï†ú API Í≤ÄÏÉâ Í≤∞Í≥º:', searchData.coins?.slice(0, 5));
                    
                    if (searchData.coins && searchData.coins.length > 0) {
                        return searchData.coins.slice(0, 5);
                    }
                }
                
                // ÎßàÏºì Îç∞Ïù¥ÌÑ∞ÏóêÏÑú ÏßÅÏ†ë Í≤ÄÏÉâ
                console.log('ÎßàÏºì Îç∞Ïù¥ÌÑ∞ÏóêÏÑú Í≤ÄÏÉâ ÏãúÎèÑ...');
                const marketUrl = `${API_BASE_URL}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1&sparkline=false`;
                
                const marketResponse = await fetchWithHeaders(marketUrl);
                
                if (marketResponse.ok) {
                    const marketData = await marketResponse.json();
                    
                    const filtered = marketData.filter(coin => 
                        coin.name.toLowerCase().includes(query.toLowerCase()) ||
                        coin.symbol.toLowerCase().includes(query.toLowerCase()) ||
                        coin.id.toLowerCase().includes(query.toLowerCase())
                    );
                    
                    console.log('ÎßàÏºì Îç∞Ïù¥ÌÑ∞ Í≤ÄÏÉâ Í≤∞Í≥º:', filtered.slice(0, 5));
                    
                    if (filtered.length > 0) {
                        return filtered.slice(0, 5).map(coin => ({
                            id: coin.id,
                            name: coin.name,
                            symbol: coin.symbol,
                            market_cap_rank: coin.market_cap_rank
                        }));
                    }
                }
                
                throw new Error('Î™®Îì† Í≤ÄÏÉâ Î∞©Î≤ï Ïã§Ìå®');
                
            } catch (error) {
                console.error('Í≤ÄÏÉâ ÏóêÎü¨, ÎçîÎØ∏ Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©:', error);
                
                const dummyResults = [
                    { id: 'ethena', name: 'Ethena', symbol: 'ENA', market_cap_rank: 45 },
                    { id: 'hifi-finance', name: 'Hifi Finance', symbol: 'HIFI', market_cap_rank: 180 },
                    { id: 'dogecoin', name: 'Dogecoin', symbol: 'DOGE', market_cap_rank: 8 },
                    { id: 'shiba-inu', name: 'Shiba Inu', symbol: 'SHIB', market_cap_rank: 15 },
                    { id: 'matic-network', name: 'Polygon', symbol: 'MATIC', market_cap_rank: 12 }
                ];
                
                const filtered = dummyResults.filter(coin => 
                    coin.name.toLowerCase().includes(query.toLowerCase()) ||
                    coin.symbol.toLowerCase().includes(query.toLowerCase()) ||
                    coin.id.toLowerCase().includes(query.toLowerCase())
                );
                
                return filtered.slice(0, 5);
            }
        }

        // ÌäπÏ†ï ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
        async function fetchSpecificCoin(coinId) {
            try {
                const url = `${API_BASE_URL}/simple/price?ids=${coinId}&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true&include_market_cap=true`;
                
                console.log('ÌäπÏ†ï ÏΩîÏù∏ API Ìò∏Ï∂ú:', url);
                
                const response = await fetchWithHeaders(url);
                
                if (!response.ok) {
                    console.warn('API ÏùëÎãµ Ïã§Ìå®:', response.status);
                    return null;
                }
                
                const data = await response.json();
                console.log('API ÏùëÎãµ Îç∞Ïù¥ÌÑ∞:', data);
                
                const coinData = data[coinId];
                
                if (!coinData) {
                    console.warn('ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå:', coinId);
                    return null;
                }
                
                // ÏΩîÏù∏ Ïù¥Î¶ÑÍ≥º Ïã¨Î≥º Îß§Ìïë
                let coinName = coinId.charAt(0).toUpperCase() + coinId.slice(1);
                let coinSymbol = coinId.split('-')[0].toUpperCase();
                
                const nameMapping = {
                    'matic-network': { name: 'Polygon', symbol: 'MATIC' },
                    'shiba-inu': { name: 'Shiba Inu', symbol: 'SHIB' },
                    'avalanche-2': { name: 'Avalanche', symbol: 'AVAX' },
                    'binancecoin': { name: 'BNB', symbol: 'BNB' },
                    'ethena': { name: 'Ethena', symbol: 'ENA' },
                    'hifi-finance': { name: 'Hifi Finance', symbol: 'HIFI' }
                };
                
                if (nameMapping[coinId]) {
                    coinName = nameMapping[coinId].name;
                    coinSymbol = nameMapping[coinId].symbol;
                }
                
                return {
                    id: coinId,
                    symbol: coinSymbol,
                    name: coinName,
                    icon: 'üîç',
                    price: coinData.usd || 0,
                    change: coinData.usd_24h_change || 0,
                    volume: coinData.usd_24h_vol || 0,
                    marketCap: coinData.usd_market_cap || 0
                };
            } catch (error) {
                console.error('ÌäπÏ†ï ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ ÏóêÎü¨:', error);
                return null;
            }
        }

        // Í≤ÄÏÉâ Í¥ÄÎ†® Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
        let searchTimeout;
        const searchInput = document.getElementById('coinSearch');
        const suggestionsContainer = document.getElementById('searchSuggestions');

        searchInput.addEventListener('input', function(e) {
            const query = e.target.value.trim();
            
            clearTimeout(searchTimeout);
            
            if (query.length < 2) {
                suggestionsContainer.classList.remove('show');
                return;
            }
            
            searchTimeout = setTimeout(async () => {
                console.log('ÏûêÎèôÏôÑÏÑ± Í≤ÄÏÉâ:', query);
                const suggestions = await searchCoin(query);
                displaySuggestions(suggestions);
            }, 300);
        });

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-container')) {
                suggestionsContainer.classList.remove('show');
            }
        });

        function displaySuggestions(suggestions) {
            console.log('ÏûêÎèôÏôÑÏÑ± ÌëúÏãú:', suggestions.length, 'Í∞ú');
            
            if (suggestions.length === 0) {
                suggestionsContainer.innerHTML = '<div class="suggestion-item">Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§</div>';
                suggestionsContainer.classList.add('show');
                return;
            }
            
            let html = '';
            suggestions.forEach(coin => {
                html += `
                    <div class="suggestion-item" onclick="selectCoin('${coin.id}', '${coin.name}', '${coin.symbol}')">
                        <strong>${coin.name}</strong> (${coin.symbol})
                        <br><small>Rank: #${coin.market_cap_rank || 'N/A'}</small>
                    </div>
                `;
            });
            
            suggestionsContainer.innerHTML = html;
            suggestionsContainer.classList.add('show');
        }

        async function selectCoin(coinId, coinName, symbol) {
            console.log('ÏΩîÏù∏ ÏÑ†ÌÉù:', coinId, coinName, symbol);
            searchInput.value = `${coinName} (${symbol})`;
            suggestionsContainer.classList.remove('show');
            
            const container = document.getElementById('gainersCards');
            container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #48cae4;">üîç ' + coinName + ' Î∂ÑÏÑù Ï§ë...</div>';
            
            await analyzeCoin(coinId, coinName, symbol);
        }

        async function analyzeCoinById(coinId) {
            await analyzeCoin(coinId, coinId, coinId.toUpperCase());
        }

        document.getElementById('searchBtn').addEventListener('click', async function() {
            const query = searchInput.value.trim();
            if (!query) {
                alert('ÏΩîÏù∏Î™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî');
                return;
            }
            
            console.log('Í≤ÄÏÉâ Î≤ÑÌäº ÌÅ¥Î¶≠:', query);
            
            const firstSuggestion = suggestionsContainer.querySelector('.suggestion-item');
            if (firstSuggestion && suggestionsContainer.classList.contains('show')) {
                firstSuggestion.click();
                return;
            }
            
            const suggestions = await searchCoin(query);
            if (suggestions.length > 0) {
                await selectCoin(suggestions[0].id, suggestions[0].name, suggestions[0].symbol);
            } else {
                alert('Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.');
            }
        });

        searchInput.addEventListener('keypress', async function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const query = this.value.trim();
                if (!query) return;
                
                console.log('Enter ÌÇ§ Í≤ÄÏÉâ:', query);
                
                const firstSuggestion = suggestionsContainer.querySelector('.suggestion-item');
                if (firstSuggestion && suggestionsContainer.classList.contains('show')) {
                    firstSuggestion.click();
                    return;
                }
                
                suggestionsContainer.classList.remove('show');
                const suggestions = await searchCoin(query);
                if (suggestions.length > 0) {
                    await selectCoin(suggestions[0].id, suggestions[0].name, suggestions[0].symbol);
                } else {
                    alert('Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.');
                }
            }
        });

        async function analyzeCoin(coinId, coinName, symbol) {
            try {
                console.log('ÏΩîÏù∏ Î∂ÑÏÑù ÏãúÏûë:', coinId, coinName, symbol);
                
                let coinData = await fetchSpecificCoin(coinId);
                
                if (!coinData) {
                    console.log('API Ïã§Ìå®, ÎçîÎØ∏ Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©');
                    coinData = generateDummyCoinData(coinId, coinName, symbol);
                }
                
                coinData.analyzed = true;
                
                const existingIndex = gainersData.findIndex(coin => coin.id === coinId);
                if (existingIndex >= 0) {
                    gainersData[existingIndex] = coinData;
                } else {
                    gainersData.unshift(coinData);
                    if (gainersData.length > 7) gainersData.pop();
                }
                
                renderGainersCards();
                
                const totalScore = calculateChecklistScores();
                renderChecklist();
                updateStrategy(totalScore);
                
                console.log('‚úÖ ÏΩîÏù∏ Î∂ÑÏÑù ÏôÑÎ£å:', coinData);
                
            } catch (error) {
                console.error('Î∂ÑÏÑù ÏóêÎü¨:', error);
                const container = document.getElementById('gainersCards');
                container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #ff4757;">‚ùå Î∂ÑÏÑù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.</div>';
            }
        }

        function generateDummyCoinData(coinId, coinName, symbol) {
            const randomPrice = Math.random() * 100 + 1;
            const randomChange = (Math.random() - 0.5) * 20;
            
            return {
                id: coinId,
                symbol: symbol || coinId.toUpperCase(),
                name: coinName || coinId,
                icon: 'üîç',
                price: randomPrice,
                change: randomChange,
                volume: Math.random() * 1000000000,
                marketCap: Math.random() * 10000000000
            };
        }
        
        function calculateCoinScore(coin) {
            let score = 0;
            
            if (coin.symbol === 'BTC' && coin.price > 95000) score += 20;
            else if (coin.symbol === 'ETH' && coin.price > 3500) score += 18;
            else if (coin.price > 0) score += 15;
            
            if (coin.change > 5) score += 25;
            else if (coin.change > 2) score += 20;
            else if (coin.change > 0) score += 15;
            else if (coin.change > -2) score += 10;
            else score += 5;
            
            if (coin.volume > 20000000000) score += 25;
            else if (coin.volume > 10000000000) score += 20;
            else if (coin.volume > 5000000000) score += 15;
            else score += 10;
            
            if (coin.marketCap > 1000000000000) score += 20;
            else if (coin.marketCap > 100000000000) score += 15;
            else if (coin.marketCap > 50000000000) score += 12;
            else score += 8;
            
            if (Math.abs(coin.change) < 1) score += 20;
            else if (Math.abs(coin.change) < 3) score += 15;
            else score += 10;
            
            if (coin.change > 0 && coin.volume > 5000000000) score += 10;
            else if (coin.change > -1) score += 7;
            else score += 3;
            
            if (coin.symbol === 'SOL' || coin.symbol === 'ETH') score += 5;
            
            return Math.min(140, Math.max(0, score));
        }
        
        function getStrategyDirection(coinScore, change) {
            if (coinScore >= 100 && change > 0) {
                return { direction: 'LONG', class: 'long-strategy', signal: 'üìà Í∞ïÎ†• Îß§Ïàò' };
            } else if (coinScore >= 80 && change > -1) {
                return { direction: 'LONG', class: 'long-strategy', signal: 'üìà Îß§Ïàò' };
            } else if (coinScore <= 40 && change < -2) {
                return { direction: 'SHORT', class: 'short-strategy', signal: 'üìâ Îß§ÎèÑ/Ïàè' };
            } else if (coinScore <= 60 && change < 0) {
                return { direction: 'SHORT', class: 'short-strategy', signal: 'üìâ ÏïΩÏÑ∏' };
            } else {
                return { direction: 'HOLD', class: 'hold-strategy', signal: '‚öñÔ∏è Í¥ÄÎßù' };
            }
        }
        
        function calculateChecklistScores() {
            const allCoins = [...coreCoinsData, ...gainersData];
            console.log('üî¢ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ Í≥ÑÏÇ∞ - Ï†ÑÏ≤¥ ÏΩîÏù∏ Ïàò:', allCoins.length);
            
            if (!allCoins || allCoins.length === 0) {
                console.log('‚ùå ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏñ¥ÏÑú Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ Ï†êÏàò 0 Î∞òÌôò');
                checklistItems.forEach(item => {
                    item.score = 0;
                });
                return 0;
            }
            
            const avgChange = allCoins.reduce((sum, coin) => sum + (coin.change || 0), 0) / allCoins.length;
            const totalVolume = allCoins.reduce((sum, coin) => sum + (coin.volume || 0), 0);
            const btc = allCoins.find(coin => coin.symbol === 'BTC');
            
            console.log('üìä Í≥ÑÏÇ∞ Îç∞Ïù¥ÌÑ∞:');
            console.log('- ÌèâÍ∑† Î≥ÄÌôîÏú®:', avgChange.toFixed(2), '%');
            console.log('- Ï¥ù Í±∞ÎûòÎüâ:', totalVolume.toLocaleString());
            console.log('- BTC Îç∞Ïù¥ÌÑ∞:', btc ? `$${btc.price.toLocaleString()}, ${btc.change.toFixed(2)}%` : 'ÏóÜÏùå');
            
            checklistItems[0].score = Math.min(20, Math.max(0, Math.floor(12 + avgChange * 1.5)));
            checklistItems[1].score = Math.min(25, Math.max(5, btc ? Math.floor(15 + (btc.price > 95000 ? 8 : 3)) : 15));
            checklistItems[2].score = Math.min(25, Math.max(5, Math.floor(totalVolume / 3000000000)));
            checklistItems[3].score = Math.min(20, Math.max(5, Math.floor(12 + avgChange * 0.8)));
            checklistItems[4].score = Math.min(20, Math.max(5, Math.floor(18 - Math.abs(avgChange) * 1.2)));
            checklistItems[5].score = Math.min(20, Math.max(5, btc ? Math.floor(12 + btc.change * 2) : 12));
            checklistItems[6].score = Math.min(10, Math.max(2, Math.floor(6 + avgChange * 0.5)));
            
            const totalScore = checklistItems.reduce((sum, item) => sum + item.score, 0);
            
            console.log('üìã Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ ÏÑ∏Î∂Ä Ï†êÏàò:');
            checklistItems.forEach(item => {
                console.log(`- ${item.name}: ${item.score}/${item.max}Ï†ê`);
            });
            console.log('‚úÖ Ï¥ù Ï†êÏàò:', totalScore + '/140Ï†ê');
            
            return totalScore;
        }
        
        function calculateTradingPrices(coin, strategy) {
            const currentPrice = parseFloat(coin.price) || 0;
            if (currentPrice === 0) return { entry: 0, target: 0, stop: 0, rr: '0' };
            
            let entryPrice, targetPrice, stopLoss, riskReward;
            
            if (strategy.direction === 'LONG') {
                entryPrice = currentPrice * 1.002;
                targetPrice = currentPrice * 1.08;
                stopLoss = currentPrice * 0.95;
            } else if (strategy.direction === 'SHORT') {
                entryPrice = currentPrice * 0.998;
                targetPrice = currentPrice * 0.92;
                stopLoss = currentPrice * 1.05;
            } else {
                entryPrice = currentPrice;
                targetPrice = currentPrice * 1.03;
                stopLoss = currentPrice * 0.97;
            }
            
            const risk = Math.abs(entryPrice - stopLoss);
            const reward = Math.abs(targetPrice - entryPrice);
            riskReward = risk > 0 ? (reward / risk).toFixed(2) : '0';
            
            return {
                entry: entryPrice,
                target: targetPrice,
                stop: stopLoss,
                rr: riskReward
            };
        }
        
        function formatPrice(price) {
            if (!price || price === 0) return '0';
            if (price > 10000) return price.toLocaleString();
            if (price > 100) return price.toFixed(2);
            if (price > 1) return price.toFixed(3);
            return price.toFixed(4);
        }
        
        function createCoinCard(coin) {
            const coinScore = calculateCoinScore(coin);
            const strategy = getStrategyDirection(coinScore, coin.change);
            const prices = calculateTradingPrices(coin, strategy);
            
            let cardClass = 'neutral';
            if (strategy.direction === 'LONG') cardClass = 'bullish';
            else if (strategy.direction === 'SHORT') cardClass = 'bearish';
            
            const isInFavorites = isFavorite(coin.id);
            
            return `
                <div class="price-card ${cardClass}">
                    <div class="coin-header">
                        <div class="coin-name">
                            ${coin.icon} ${coin.symbol}
                            <button class="star-btn ${isInFavorites ? 'active' : ''}" 
                                    onclick="toggleFavorite('${coin.id}', '${coin.symbol}')">
                                ${isInFavorites ? '‚òÖ' : '‚òÜ'}
                            </button>
                        </div>
                        <div class="coin-score">${coinScore}/140</div>
                    </div>
                    <div class="coin-price">
                        $${formatPrice(coin.price)}
                    </div>
                    <div class="price-change">
                        ${coin.change >= 0 ? '+' : ''}${coin.change.toFixed(2)}%
                    </div>
                    
                    <div class="strategy-direction ${strategy.class}">
                        ${strategy.signal}
                    </div>
                    
                    <div class="trading-info">
                        <div class="trading-grid">
                            <div class="trading-item">
                                <span class="trading-label">${strategy.direction === 'SHORT' ? 'Ïàè ÏßÑÏûÖÍ∞Ä:' : 'Î°± ÏßÑÏûÖÍ∞Ä:'}</span>
                                <span class="trading-value entry-price">$${formatPrice(prices.entry)}</span>
                            </div>
                            <div class="trading-item">
                                <span class="trading-label">Î™©ÌëúÍ∞Ä:</span>
                                <span class="trading-value target-price">$${formatPrice(prices.target)}</span>
                            </div>
                            <div class="trading-item">
                                <span class="trading-label">ÏÜêÏ†àÍ∞Ä:</span>
                                <span class="trading-value stop-loss">$${formatPrice(prices.stop)}</span>
                            </div>
                            <div class="trading-item">
                                <span class="trading-label">ÏÜêÏùµÎπÑ:</span>
                                <span class="trading-value risk-reward">1:${prices.rr}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function toggleFavorite(coinId, symbol) {
            if (isFavorite(coinId)) {
                removeFromFavorites(coinId);
            } else {
                addToFavorites(coinId, symbol);
            }
            
            renderCoreCoinsCards();
            renderGainersCards();
        }
        
        function renderCoreCoinsCards() {
            console.log('üéØ ÌïµÏã¨ ÏΩîÏù∏ Ïπ¥Îìú Î†åÎçîÎßÅ...');
            const container = document.getElementById('coreCoinsCards');
            
            if (!coreCoinsData || coreCoinsData.length === 0) {
                console.log('ÌïµÏã¨ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå');
                container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px;">ÌïµÏã¨ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞Î•º Î°úÎî©Ï§ëÏûÖÎãàÎã§...</div>';
                return;
            }
            
            let html = '';
            coreCoinsData.forEach(coin => {
                html += createCoinCard(coin);
            });
            
            container.innerHTML = html;
            console.log('‚úÖ ÌïµÏã¨ ÏΩîÏù∏ Ïπ¥Îìú', coreCoinsData.length, 'Í∞ú Î†åÎçîÎßÅ ÏôÑÎ£å');
        }
        
        function renderGainersCards() {
            console.log('üìà ÏÉÅÏäπ ÏΩîÏù∏ Ïπ¥Îìú Î†åÎçîÎßÅ...');
            const container = document.getElementById('gainersCards');
            
            if (!gainersData || gainersData.length === 0) {
                console.log('ÏÉÅÏäπ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå');
                container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px;">ÏÉÅÏäπ ÏΩîÏù∏ Îç∞Ïù¥ÌÑ∞Î•º Î°úÎî©Ï§ëÏûÖÎãàÎã§...</div>';
                return;
            }
            
            let html = '';
            gainersData.forEach(coin => {
                html += createCoinCard(coin);
            });
            
            container.innerHTML = html;
            console.log('‚úÖ ÏÉÅÏäπ ÏΩîÏù∏ Ïπ¥Îìú', gainersData.length, 'Í∞ú Î†åÎçîÎßÅ ÏôÑÎ£å');
        }
        
        function renderChecklist() {
            console.log('üìä Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ Î†åÎçîÎßÅ...');
            const container = document.getElementById('checklistGrid');
            let html = '';
            
            checklistItems.forEach(item => {
                const percentage = item.max > 0 ? (item.score / item.max) * 100 : 0;
                html += `
                    <div class="checklist-item">
                        <div class="checklist-item-header">
                            <span>${item.name}</span>
                            <span class="checklist-score">${item.score}/${item.max}Ï†ê</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            const totalScore = checklistItems.reduce((sum, item) => sum + item.score, 0);
            document.getElementById('totalScore').textContent = `${totalScore}/140Ï†ê`;
            console.log('‚úÖ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ Î†åÎçîÎßÅ ÏôÑÎ£å:', totalScore + '/140Ï†ê');
            
            return totalScore;
        }
        
        function updateStrategy(totalScore) {
            console.log('üéØ Ï†ÑÎûµ ÏóÖÎç∞Ïù¥Ìä∏...');
            let signal, leverage, position, status, avgRR;
            
            if (totalScore >= 120) {
                signal = 'üöÄ Í∞ïÌïú Îß§Ïàò Ïã†Ìò∏';
                leverage = '5-7x';
                position = '90%';
                status = 'Í∞ïÏÑ∏Ïû•';
                avgRR = '1:4';
            } else if (totalScore >= 100) {
                signal = 'üìà Îß§Ïàò Ïö∞ÏúÑ';
                leverage = '3-5x';
                position = '70%';
                status = 'ÏÉÅÏäπÏû•';
                avgRR = '1:2.5';
            } else if (totalScore >= 80) {
                signal = '‚öñÔ∏è Ï§ëÎ¶Ω ÏãúÏû•';
                leverage = '1-3x';
                position = '50%';
                status = 'Ìö°Î≥¥Ïû•';
                avgRR = '1:1.5';
            } else {
                signal = '‚ö†Ô∏è Ï£ºÏùò ÌïÑÏöî';
                leverage = 'Î¨¥Î†àÎ≤ÑÎ¶¨ÏßÄ';
                position = '30%';
                status = 'ÏïΩÏÑ∏Ïû•';
                avgRR = '1:1';
            }
            
            document.getElementById('strategySignal').textContent = signal;
            document.getElementById('leverageRec').textContent = leverage;
            document.getElementById('positionSize').textContent = position;
            document.getElementById('avgRiskReward').textContent = avgRR;
            document.getElementById('marketStatus').textContent = status;
            console.log('‚úÖ Ï†ÑÎûµ ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å:', signal);
        }
        
        async function updateDashboard() {
            console.log('üöÄ ÎåÄÏãúÎ≥¥Îìú Ï†ÑÏ≤¥ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÏûë...');
            
            await fetchAllCryptoData();
            console.log('üé® UI Î†åÎçîÎßÅ ÏãúÏûë...');
            renderCoreCoinsCards();
            renderGainersCards();
            
            console.log('üìä Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ Í∞ïÏ†ú ÏóÖÎç∞Ïù¥Ìä∏...');
            const totalScore = calculateChecklistScores();
            renderChecklist();
            updateStrategy(totalScore);
            
            const now = new Date();
            document.getElementById('lastUpdate').textContent = now.toLocaleTimeString('ko-KR');
            
            console.log('‚úÖconsole.log('‚úÖ ÎåÄÏãúÎ≥¥Îìú Ï†ÑÏ≤¥ ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å!');
        }
        
        function startCountdown() {
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
            
            countdownInterval = setInterval(() => {
                countdown--;
                if (countdown <= 0) {
                    countdown = 60;
                    updateDashboard();
                }
                document.getElementById('countdown').textContent = countdown;
            }, 1000);
        }
        
        async function init() {
            console.log('üé¨ Ïï± Ï¥àÍ∏∞Ìôî ÏãúÏûë...');
            
            renderFavorites();
            await updateDashboard();
            startCountdown();
            
            // 5Î∂ÑÎßàÎã§ Ï∂îÍ∞Ä ÏóÖÎç∞Ïù¥Ìä∏
            if (updateInterval) {
                clearInterval(updateInterval);
            }
            updateInterval = setInterval(updateDashboard, 300000);
            
            console.log('üéâ Ïï± Ï¥àÍ∏∞Ìôî ÏôÑÎ£å!');
        }
        
        // DOM Î°úÎìú ÏôÑÎ£å Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üìÑ DOM Î°úÎìú ÏôÑÎ£å, Ïï± ÏãúÏûë...');
            init();
        });

        // ÌéòÏù¥ÏßÄ Ïñ∏Î°úÎìú Ïãú ÌÉÄÏù¥Î®∏ Ï†ïÎ¶¨
        window.addEventListener('beforeunload', () => {
            if (updateInterval) clearInterval(updateInterval);
            if (countdownInterval) clearInterval(countdownInterval);
        });

        // Ï†ÑÏó≠ ÏóêÎü¨ Ìï∏Îì§ÎßÅ
        window.addEventListener('error', (event) => {
            console.error('‚ùå Ï†ÑÏó≠ ÏóêÎü¨:', event.error);
            updateDebugInfo('ÏóêÎü¨ Î∞úÏÉù', new Date().toLocaleTimeString(), event.error.message);
        });

        // Ï≤òÎ¶¨ÎêòÏßÄ ÏïäÏùÄ Promise Í±∞Î∂Ä Ï≤òÎ¶¨
        window.addEventListener('unhandledrejection', (event) => {
            console.error('‚ùå Ï≤òÎ¶¨ÎêòÏßÄ ÏïäÏùÄ Promise Í±∞Î∂Ä:', event.reason);
            updateDebugInfo('Promise ÏóêÎü¨', new Date().toLocaleTimeString(), event.reason.toString());
        });
    </script>
</body>
</html>